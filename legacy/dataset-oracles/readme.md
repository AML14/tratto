
Generated datasets are readily available under "Asterix/Oracle/Data/oracle-dataset" folder. 

NOTE: oracles-dataset.xlsx file under "Asterix/Oracle/Data" includes a couple of sample data points. It is intended to use as manual during the collection of oracle-dataset.


This project is used to create dataset-1. The project includes source code and necessary preliminary data, i.e., projects from ISSTA'18 paper and oracles generated for those projects by JDoctor.

Folder structure:

- /src/main/resources folder includes resources used during data collection. 
- /src/main/java folder includes java codes which collects information with JavaParser from ISSTA'18 projects. 
- /src/main/R folder includes R codes which process the information collected JavaParser to generate the final dataset-1. 

The project has two main parts, java and R parts:
PART 1. Java part is the first part. It is used to collect class, method and javadoc related information from input projects using JavaParser & JavaSymbolSolver.
- Input: 1) Source of ISSTA'18 projects and 2) source of java library project.
- Output: A json file for each project that includes the collected data.

List of tasks: 
1) Collect the information listed below, looping through the source files of each input project. Write the collected information into a json file in a very similar structure to the structure described below. 
1.1) Each source file may include a class. For each file, collect the class-level info, fields, constructors and methods.
1.2) For each field, constructor and method, collect the source code, javadoc, literal expressions, field accesses, method calls, variable declarations (only for constructor and method), signature (only for constructor and method), return type (only for constructor and method), and parameters (arguments, and only for constructor and method).
1.2.2) Resolve the method return types, parameter (argument) types, and method signatures using JavaSymbolSolver.

List of collected information: 

	{Source file name,
	 Source file imports,
	 Class-level javadoc,
	 Field declarations:	{Source code,
				 Javadoc,
				 Field
				 Method calls in the code,
			 	 Field accesses in the code
				},
	 Constructors:	{Name, 
			 Signature,
			 Parameters,
			 Return type,
			 Javadoc,
			 Javadoc tags: {
					 Tag,
					 tag type
					},
			 Source code,
			 Literal expressions in the code,
			 Method calls in the code,
			 Field accesses in the code,
			 Variable declarations in the code
			},
	 Methods:	{Name, 
			 Signature,
			 Parameters,
			 Return type,
			 Javadoc,
			 Javadoc tags: {
					 Tag,
					 tag type
					},
			 Source code,
			 Literal expressions in the code,
			 Method calls in the code,
			 Field accesses in the code,
			 Variable declarations in the code
			}, 
	}

PART 2. Second part is written in R. The aim of this part is to match JDoctor generated oracles with the data collected in step 1 and include other information that cannot be collected directly using JavaParser & JavaSymbolSolver. More specifically, some information we need requires text processing and extra calculation on the collected data via JavaParser.
 
- Input: 1) Data generated in part-1 and 2) oracle files generated by Jdoctor. 
- Output: The final dataset in xlsx format. 

List of tasks:
 
 1) Match oracles with the correct methods' javadoc tags
 2) Extract literals (integers, floats, strings) from javadocs
 3) Extract literals from oracles (global dictionary)
 4) Gather list of all classes in a project
 5) Gather list of all methods in a project
 6) Include general grammar tokens to the final dataset 
 7) Extract methods that applicable to the method parameters, method itself, the class method belongs to.
 8) Extract attributes that applicable to the method parameters, method itself, the class method belongs to.
 9) Extract methods that applicable to the method in oracles.
 10) Extract attributes that applicable to the method in oracles.
 11) Copy other necessary information from the json files generated in part-1 (e.g., method parameters, javadocs)
 12) Create the final dataset in xlsx format.

*Applicable: Non-private, non-static, non-void methods/attributes.


Before running the code:

1. Put below resources to the "src/main/resources/" folder:

 1.1 ISSTA'18 projects' source & JDoctor generated oracles (https://www.dropbox.com/scl/fo/9zrcoe6y5qhc8pf8i6fdv/h?dl=0&rlkey=0vk1ceyosb2x4q293qmvqnoyq). 
 Explanation: The zip file (ISSTA18_Projects.zip) in the dropbox link includes both source codes of the projects and oracles generated for those projects. Jdoctor generated oracles are in the "conditions" folder within each project.

 1.2. jdk-11 source (https://github.com/AdoptOpenJDK/openjdk-jdk11)
 Explanation: clone the project in the link under the src/main/resources/ folder.

2. Update the myWorkingDir according to yours in 0.Main.R file. 

3. To run the R code you need to have R. Download is available in: https://cran.r-project.org/. 

4. A command (Rscript src/main/R/0.Main.R) should be enough to run R scripts. However, if you would like to use an IDE, the link for downloading R studio https://posit.co/download/rstudio-desktop/. 


To create the oracle-dataset:

1. Run the java code, it would generate json files under the folder of "data/javaparserOutput".
2. Run the "Rscript src/main/R/0.Main.R" from command line or run 0.Main.R script in R studio. Script will run a while and generate the oracle-dataset under "data/rOutput" folder. 














List of ISSTA'18 projects: 
1. commons-collections4-4.1
2. commons-math3-3.6.1
3. gs-core-1.3
4. guava-19.0
5. jgrapht-core-0.9.2
6. plume-lib-1.1.0
